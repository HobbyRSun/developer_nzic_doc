# 模拟量输出
模拟量输出需要采用数模转换芯片去实现，模拟量输出可以分为电压与电流输出。

(1) 电压输出，推荐电路如下图所示，此推荐电路采用的数模转换芯片为MCP4728，精度12位，支持4路模拟量输出，内部基准可配置为2.048或4.096V。此电路数模转换芯片采用I2C通讯，需注意有多路I2C设备时地址是否有冲突。

![Image: image_025](../../images/image_025.png)

电压输出电路元器件清单：

| **序号** | **位号** | **规格** | **数量** |
| --- | --- | --- | --- |
| 1 | C1 C2 | 贴片电容 0603 1nf±10%/50V X7R | 2 |
| 2 | D1 | TVS二极管 BAT54SLT1G | 1 |
| 3 | R1 | 贴片电阻 0603 4.7KΩ±1% | 1 |
| 4 | R2 R5 | 贴片电阻 0603 1KΩ±1% | 2 |
| 5 | R3 | 贴片电阻 0603 2KΩ±1% | 1 |
| 6 | R4 R6 R8 | 贴片电阻 0603 10KΩ±1% | 3 |
| 7 | R7 | 贴片电阻 0603 20KΩ±1% | 1 |
| 8 | R9 | 贴片电阻 0603 4.99KΩ±1% | 1 |
| 9 | U2 | 通用运放 LM324 | 1 |
| 10 | U1 | 数模转换芯片 MCP4728 | 1 |

该电路可更改电阻阻值实现0-10V、0-5V、0-2.5V电压范围的输出，详见下表。

| **输出范围** | **R7** | **R9** |
| --- | --- | --- |
| 0-10V | 20K | 4.99K |
| 0-5V | 20K | 13.3K |
| 0-2.5V | 5K | 20K |

(2) 电流输出，推荐电路如下图所示，此推荐电路采用的数模转换芯片为MCP4728，精度12位。内部基准可配置为2.048或4.096V。此电路数模转换芯片采用I2C通讯，需注意有多路I2C设备时地址是否有冲突，该电路可支持0-20mA电流输出。

![Image: image_026](../../images/image_026.png)

电流输出电路元器件清单：

| **序号** | **位号** | **规格** | **数量** |
| --- | --- | --- | --- |
| 1 | C1 C3 | 贴片电容 0603 0.1uf±10%/50V X7R | 2 |
| 2 | C2 | 贴片电容 0603 1uf±10%/50V X5R | 1 |
| 3 | D1 | 通用二极管 1N4007 | 1 |
| 4 | D2 | ESD二极管 PESD24VL1BA | 1 |
| 5 | Q1 | 三极管 BC807-40 | 1 |
| 6 | Q2 | 双极晶体管 2SA1417 | 1 |
| 7 | Q3 | 场效应管 IRFR9120N | 1 |
| 8 | R1 | 贴片电阻 0603 2KΩ±1% | 1 |
| 9 | R2 R3 | 贴片电阻 0603 1KΩ±1% | 2 |
| 10 | R4 | 贴片电阻 0603 22Ω±1% | 1 |
| 11 | R5 | 贴片电阻 0603 5.1KΩ±1% | 1 |
| 12 | U1 | 数模转换芯片 MCP4728 | 1 |
| 13 | U2 | 传感器接口芯片 XTR111 | 1 |